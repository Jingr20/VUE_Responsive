<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // ************************************ 模拟Vue观察者模式 ************************************
        // 目标（发布者）
        class Dep{
            // subs数组：存储观察者（订阅者）
            // addSub()：添加观察者
            // notify()：触发观察者的update方法
            constructor(){
                this.subs = [];
            }

            addSub(sub){
                // 判断观察者是否有update方法
                if(sub && sub.update){
                    this.subs.push(sub);
                }
            }

            notify(){
                // 遍历所有的观察者
                this.subs.forEach(sub => {
                    sub.update();
                });
            }

        }

        // 观察者（订阅者）
        class Watcher{
            // 观察者要有update方法
            constructor(){

            }

            update(){
                console.log('update');
            }
        }

        let watcher = new Watcher();
        let dep = new Dep();

        dep.addSub(watcher);
        dep.notify();



    </script>
</body>
</html>